# ============================================
# Shared / AWS Account (Required)
# ============================================
# Your AWS account number (12 digits)
AWS_ACCOUNT_ID=123123123123

# AWS region where resources will be deployed
AWS_REGION=eu-west-1

# ============================================
# Shared / Environment (Required)
# ============================================
# dev | staging | prod
ENVIRONMENT=dev

# true | false
ENABLE_DELETION_PROTECTION=false

# ============================================
# Core Stack (core-api) (Required)
# ============================================
# Name of your ECR repository containing the Core API Docker image
CORE_ECR_REPOSITORY_NAME=rawstack/core-api

# Database name to create
CORE_DB_NAME=mydb

# Database username
CORE_DB_USER=hello321

# Database port (optional, defaults to 5432)
CORE_DB_PORT=5432

# JWT access token time-to-live (e.g., "3600" for 1 hour)
CORE_ACCESS_TOKEN_TTL=1500

# JWT secret key for token signing (use a strong, random value)
CORE_JWT_SECRET=your-secure-jwt-secret-key-here

# ============================================
# Core Stack (core-api) (Optional)
# ============================================
# Number of ECS tasks to run (defaults to 1)
CORE_DESIRED_TASK_COUNT=1

# Container port (defaults to 3001)
CORE_CONTAINER_PORT=3001

# Maximum number of Availability Zones (defaults to 2)
CORE_MAX_AZS=2

# Number of NAT Gateways (defaults to 1)
CORE_NAT_GATEWAYS=1

# ============================================
# Core Stack - Redis (Optional)
# ============================================
# Redis deployment mode: 'single' for single-node, 'cluster' for replication group with replicas
# single | cluster (defaults to single)
CORE_REDIS_MODE=single

# ElastiCache node type (defaults to cache.t4g.micro)
CORE_REDIS_NODE_TYPE=cache.t4g.micro

# Number of read replicas when using cluster mode (defaults to 1)
# Only applies when CORE_REDIS_MODE=cluster
CORE_REDIS_REPLICA_COUNT=1

# ============================================
# Web Stack (Required)
# ============================================
# Name of your ECR repository containing the Web Docker image
WEB_ECR_REPOSITORY_NAME=rawstack/web

# ============================================
# Web Stack (Optional)
# ============================================
WEB_DESIRED_TASK_COUNT=1
WEB_CONTAINER_PORT=3000

# PRICE_CLASS_100 | PRICE_CLASS_200 | PRICE_CLASS_ALL
WEB_CLOUDFRONT_PRICE_CLASS=PRICE_CLASS_100

# ============================================
# Admin Stack (Optional)
# ============================================
# Override default build path: apps/admin/dist
ADMIN_BUILD_PATH=apps/admin/dist

# PRICE_CLASS_100 | PRICE_CLASS_200 | PRICE_CLASS_ALL
ADMIN_CLOUDFRONT_PRICE_CLASS=PRICE_CLASS_100

# ============================================
# Custom Domains (Optional, opt-in)
# ============================================
# These stacks can optionally configure custom domains with HTTPS.
#
# Requirements:
# - DNS must be hosted in Route 53 (recommended), OR you must at least have a Route 53
#   public hosted zone for the domain/subdomain youâ€™re using.
# - CloudFront custom domains require the ACM certificate to be in us-east-1 (handled by CDK).
# - The Core API uses an ALB certificate in your AWS_REGION.

# Shared hosted zone settings (used by all stacks when *DOMAIN_ENABLED=true)
# Hosted zone name (no trailing dot), e.g. example.com
DOMAIN_HOSTED_ZONE_NAME=

# Optional: explicitly set hosted zone id to avoid lookup issues
DOMAIN_HOSTED_ZONE_ID=

# --- Web (CloudFront) ---
# Enable custom domain support for the web stack
WEB_DOMAIN_ENABLED=false
# Fully-qualified domain name for the web app (CloudFront), e.g. example.com or app.example.com
WEB_DOMAIN_NAME=
# Also add www.<domain> as an alias + certificate SAN
WEB_DOMAIN_ADD_WWW=false

# --- Admin (CloudFront) ---
ADMIN_DOMAIN_ENABLED=false
# Fully-qualified domain name for the admin app (CloudFront), e.g. admin.example.com
ADMIN_DOMAIN_NAME=
ADMIN_DOMAIN_ADD_WWW=false

# --- Core API (ALB) ---
CORE_DOMAIN_ENABLED=false
# Fully-qualified domain name for the API (ALB), e.g. api.example.com
CORE_DOMAIN_NAME=
CORE_DOMAIN_ADD_WWW=false

